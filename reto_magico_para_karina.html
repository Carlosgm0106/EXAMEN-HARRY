<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>De Cucu Carlos para Cucu Karina ‚Äî Apuesta </title>
<style>
:root{
  --bg:#0b0f1a;
  --card:#0f1724;
  --accent:#d4af37;
  --muted:#9aa6b2;
  --glass: rgba(255,255,255,0.04);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Georgia", "Times New Roman", serif;
  background: radial-gradient(ellipse at center, rgba(13,18,32,1) 0%, rgba(4,6,12,1) 60%);
  color:#e6eef6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

/* floating candles/stars background */
.bg-stars{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  background-image:
    radial-gradient(2px 2px at 10% 20%, rgba(212,175,55,0.9), transparent 40%),
    radial-gradient(1.5px 1.5px at 80% 30%, rgba(255,255,255,0.8), transparent 40%),
    radial-gradient(1.2px 1.2px at 50% 80%, rgba(212,175,55,0.6), transparent 40%);
  background-repeat:repeat;
  animation: twinkle 8s linear infinite;
  opacity:0.9;
  mix-blend-mode:screen;
}
@keyframes twinkle{
  0%,100%{filter:brightness(1)}
  50%{filter:brightness(1.5)}
}

/* main card */
.container{
  position:relative;
  z-index:2;
  width:min(920px,98%);
  max-width:920px;
  border-radius:14px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: 0 10px 40px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
  overflow:hidden;
  border:1px solid rgba(212,175,55,0.06);
}

/* header */
.header{
  padding:28px;
  display:flex;
  gap:18px;
  align-items:center;
  background:linear-gradient(90deg, rgba(212,175,55,0.06), rgba(212,175,55,0.0));
  border-bottom:1px solid rgba(212,175,55,0.04);
}
.logo{
  width:72px;height:72px;border-radius:20px;
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
  background:linear-gradient(180deg, rgba(212,175,55,0.16), rgba(212,175,55,0.04));
  border:1px solid rgba(212,175,55,0.12);
  font-weight:700;color:var(--accent);font-size:22px;
  box-shadow: 0 6px 18px rgba(212,175,55,0.06);
}
.title{
  font-size:18px;
  line-height:1.1;
}
.title h1{
  margin:0;font-size:20px;color:var(--accent);
  letter-spacing:0.6px;
}
.title p{margin:6px 0 0 0;color:var(--muted);font-size:14px}

/* content */
.content{padding:22px;display:grid;grid-template-columns:1fr 360px;gap:20px}
@media (max-width:880px){ .content{grid-template-columns:1fr} .sidebar{order:2} }

/* quiz card */
.quiz{
  background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));
  border-radius:10px;padding:18px;border:1px solid rgba(255,255,255,0.02);
  min-height:360px;
}
.q-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.q-header h2{margin:0;font-size:16px;color:var(--accent)}
.progress{font-size:13px;color:var(--muted)}

/* question */
.question{margin-top:8px;font-size:18px;line-height:1.3}
.options{margin-top:12px;display:grid;gap:10px}
.option{
  background:var(--glass);
  padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);
  cursor:pointer;transition:all .18s;display:flex;gap:12px;align-items:center;font-size:15px;
}
.option:hover{transform:translateY(-3px);box-shadow: 0 10px 30px rgba(2,6,23,0.5)}
.option input{display:none}
.option .letter{width:34px;height:34px;border-radius:8px;display:inline-grid;place-items:center;
  background:rgba(255,255,255,0.02);color:var(--accent);font-weight:700}
.option.selected{border-color:rgba(212,175,55,0.22);box-shadow:0 8px 30px rgba(212,175,55,0.06)}

/* nav */
.nav{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}
.btn{
  background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;color:var(--accent);
  cursor:pointer;font-weight:600;
}
.btn.primary{background:linear-gradient(90deg,var(--accent),#f0d77a);color:#101218;border:none}
.btn:active{transform:translateY(1px)}

/* sidebar */
.sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
.small{font-size:13px;color:var(--muted);margin-bottom:12px}
.final-message{display:none;padding:18px;border-radius:10px;background:linear-gradient(180deg, rgba(212,175,55,0.03), transparent);color:#071021}

/* fireworks canvas */
#fireworks{position:fixed;inset:0;pointer-events:none;z-index:5}

/* footer */
.footer{padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));text-align:center;font-size:13px;color:var(--muted)}
.small-note{font-size:12px;color:var(--muted);margin-top:8px;text-align:center}

/* animations */
.magic-reveal{display:inline-block;opacity:0;transform:translateY(6px);animation:rise .6s forwards}
@keyframes rise{to{opacity:1;transform:none}}

.center-screen{
  display:flex;align-items:center;justify-content:center;flex-direction:column;padding:40px;text-align:center
}
.start-card{max-width:720px;border-radius:12px;padding:32px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02)}
.start-btn{margin-top:18px;padding:12px 18px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent),#f7df9b);color:#071021;font-weight:800;font-size:16px;cursor:pointer}
.logo-small{font-size:24px}
</style>
</head>
<body>
<div class="bg-stars" aria-hidden="true"></div>

<div class="container" role="application" aria-label="Quiz m√°gico para Karina">
  <div class="header">
    <div class="logo">‚ú®C</div>
    <div class="title">
      <h1>De cucu Carlos para cucu que es el amor de mi vida llamada Karina Coyolxauhqui</h1>
      <p>Cucu llamando a cucu para un reto m√°gico ‚Äî Harry Potter: La piedra filosofal</p>
    </div>
  </div>

  <div class="content">
    <main class="quiz" id="quiz-area">
      <!-- start screen -->
      <div id="start-screen" class="center-screen">
        <div class="start-card">
          <div style="font-size:18px;color:var(--accent);font-weight:700">Hola Karina ‚ú®</div>
          <p style="margin-top:8px;color:var(--muted)">¬ølista para perder? Pero igual si pierdes ganas y si ganas ganas. Asi que tranqui amor</p>
          <button id="startBtn" class="start-btn" aria-label="Comenzar el reto">Comenzar el reto muy cucusiento</button>
          <p class="small-note">Ponle sonido corazon listo? vamos a empezar coyeye coyeye cucu coyeye coyeye ya estas coyendo cucu apurate</p>
        </div>
      </div>

      <!-- quiz screen -->
      <div id="quiz-screen" style="display:none">
        <div class="q-header">
          <h2 id="q-title">Pregunta</h2>
          <div class="progress" id="progress">1 / 10</div>
        </div>
        <div class="question" id="question-text">...</div>
        <div class="options" id="options"></div>

        <div class="nav">
          <button class="btn" id="prevBtn">Atr√°s</button>
          <button class="btn primary" id="nextBtn">Siguiente</button>
        </div>
      </div>

      <!-- result screen -->
      <div id="result-screen" style="display:none;padding:18px;">
        <h2 style="color:var(--accent)">¬°Resultado!</h2>
        <p id="scoreText" style="font-size:16px;"></p>
        <div id="resultDetails"></div>
        <div style="margin-top:18px">
          <button id="retryBtn" class="btn">Volver a intentar</button>
          <button id="shareBtn" class="btn primary">Guardar y compartir</button>
        </div>
      </div>
    </main>

    <aside class="sidebar">
      <div class="small">Instrucciones</div>
      <div class="small" style="margin-bottom:12px">Toca la opci√≥n que creas correcta cucu okay?.</div>

      <div class="small">Progreso</div>
      <div id="sideProgress" style="margin-bottom:12px">
        <progress value="0" max="10" style="width:100%"></progress>
      </div>

      <div class="small">Pistas</div>
      <div style="font-size:14px;color:var(--muted)">Si necesitas una pista amor, presiona el √≠cono de varita</div>

      <div class="final-message" id="finalMessageBox">
        <h3 style="margin-top:0;color:var(--accent)">TE AMO CUCU, pero mucho cucu no sabes cuanto</h3>
        <p id="specialText"></p>
      </div>
    </aside>
  </div>

  <div class="footer">
    Hecho con cari√±o por cucu Carlos ‚Äî abre esto mi cucu hermosa - Coyeye coyeye üíõ
  </div>
</div>

<canvas id="fireworks" width="800" height="600" aria-hidden="true"></canvas>

<script>
/* Questions set (10) - opci√≥n m√∫ltiple complicadas */
const questions = [
  {
    q: "¬øQu√© est√° leyendo Vernon Dursley en la mesa del desayuno antes de irse al trabajo?",
    opts: ["El Daily Mail","The Daily Prophet","El Evening Standard","El Sunday Telegraph"],
    a: 0,
    note: "Vernon lee un peri√≥dico muggle, no m√°gico."
  },
  {
    q: "¬øQu√© frase exacta dice Dudley cuando cuenta sus regalos de cumplea√±os?",
    opts: ["‚ÄúTreinta y seis‚Ä¶ el a√±o pasado tuve treinta y siete‚Äù","‚ÄúTreinta y seis‚Ä¶ el a√±o pasado tuve treinta y ocho‚Äù","‚ÄúTreinta y seis‚Ä¶ pero el a√±o pasado tuve treinta y siete‚Äù","‚ÄúTreinta y seis‚Ä¶ ¬°uno menos que el a√±o pasado!‚Äù"],
    a: 2,
    note: "Dudley exagera comparando con a√±os anteriores."
  },
  {
    q: "En la caba√±a en la roca, ¬øqu√© color tiene el paraguas de Hagrid?",
    opts: ["Marr√≥n","Rosa","Rojo","Violeta"],
    a: 1,
    note: "El paraguas rosa es visible cuando llega."
  },
  {
    q: "¬øQui√©n intenta levitar su pluma antes que Hermione?",
    opts: ["Dean Thomas","Seamus Finnigan","Neville Longbottom","Lavender Brown"],
    a: 1,
    note: "Seamus provoca un peque√±o accidente con su intento."
  },
  {
    q: "¬øQu√© n√∫mero aparece en el paquete que Hagrid retira de la b√≥veda de Gringotts?",
    opts: ["713","713A","713-B","713 sin letra"],
    a: 0,
    note: "Se menciona la b√≥veda 713."
  },
  {
    q: "En el banquete de bienvenida, ¬øqu√© fantasma atraviesa la mesa de Gryffindor?",
    opts: ["El Bar√≥n Sanguinario","El Fraile Gordo","El Casi Decapitado Nick","La Dama Gris"],
    a: 2,
    note: "Nick es el fantasma de Gryffindor."
  },
  {
    q: "¬øQu√© instrumento musical toca Fluffy para dormirlo?",
    opts: ["Flauta","Arpa","Piano","Viol√≠n"],
    a: 1,
    note: "El arpista (o el arpa) aparece en escena."
  },
  {
    q: "¬øQu√© dice Harry al ver por primera vez el Sombrero Seleccionador?",
    opts: ["‚Äú¬øEso est√° vivo?‚Äù","‚Äú¬øTenemos que ponernos eso?‚Äù","‚Äú¬øNos va a hablar?‚Äù","‚ÄúParece sucio‚Äù"],
    a: 1,
    note: "Harry pregunta si lo deben usar."
  },
  {
    q: "En el partido de Quidditch, ¬øqui√©n anota el primer gol para Gryffindor?",
    opts: ["Angelina Johnson","Katie Bell","Alicia Spinnet","Oliver Wood"],
    a: 0,
    note: "Angelina marca el primer gol."
  },
  {
    q: "¬øQu√© dice Dumbledore que ve en el espejo de Oesed?",
    opts: ["‚ÄúUn nuevo par de calcetines‚Äù","‚ÄúComida deliciosa‚Äù","‚ÄúA su familia‚Äù","‚ÄúLa victoria de Gryffindor‚Äù"],
    a: 0,
    note: "Dumbledore bromea con calcetines."
  }
];

let state = {
  idx: 0,
  answers: Array(questions.length).fill(null)
};

const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('start-screen');
const quizScreen = document.getElementById('quiz-screen');
const resultScreen = document.getElementById('result-screen');
const questionText = document.getElementById('question-text');
const optionsDiv = document.getElementById('options');
const progress = document.getElementById('progress');
const sideProgress = document.querySelector('#sideProgress progress');
const qTitle = document.getElementById('q-title');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const scoreText = document.getElementById('scoreText');
const resultDetails = document.getElementById('resultDetails');
const finalMessageBox = document.getElementById('finalMessageBox');
const specialText = document.getElementById('specialText');

startBtn.addEventListener('click', ()=> {
  startScreen.style.display='none';
  quizScreen.style.display='block';
  renderQuestion();
  playChime();
});

function renderQuestion(){
  const i = state.idx;
  qTitle.textContent = `Pregunta ${i+1}`;
  progress.textContent = `${i+1} / ${questions.length}`;
  sideProgress.value = i+1;
  questionText.textContent = questions[i].q;
  optionsDiv.innerHTML = '';
  questions[i].opts.forEach((opt, j)=>{
    const div = document.createElement('div');
    div.className='option';
    div.tabIndex=0;
    div.setAttribute('role','button');
    div.innerHTML = `<div class="letter">${String.fromCharCode(65+j)}</div><div class="opt-text">${opt}</div>`;
    if(state.answers[i]===j) div.classList.add('selected');
    div.addEventListener('click', ()=> selectOption(i,j,div));
    div.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectOption(i,j,div)});
    optionsDiv.appendChild(div);
  });
  prevBtn.disabled = i===0;
  nextBtn.textContent = i===questions.length-1 ? 'Enviar' : 'Siguiente';
}

function selectOption(qIdx, optIdx, el){
  state.answers[qIdx]=optIdx;
  // update UI
  Array.from(optionsDiv.children).forEach(ch => ch.classList.remove('selected'));
  el.classList.add('selected');
  playTap();
}

nextBtn.addEventListener('click', ()=>{
  if(state.idx < questions.length-1){
    state.idx++;
    renderQuestion();
  } else {
    // submit
    showResults();
  }
});

prevBtn.addEventListener('click', ()=>{
  if(state.idx>0){ state.idx--; renderQuestion();}
});

function showResults(){
  quizScreen.style.display='none';
  resultScreen.style.display='block';
  // compute score
  let correct = 0;
  let details = '';
  questions.forEach((q, i)=>{
    const ans = state.answers[i];
    const isCorrect = ans === q.a;
    if(isCorrect) correct++;
    const user = ans==null ? '<i>No contestado</i>' : q.opts[ans];
    details += `<div style="margin-bottom:10px;padding:10px;border-radius:8px;background:rgba(255,255,255,0.01)"><strong>Q${i+1}.</strong> ${q.q}<br><em>Tu respuesta:</em> ${user} <br><em>Respuesta correcta:</em> ${q.opts[q.a]}<br><small style="color:${isCorrect ? '#b8f5c2' : '#f5c2c2'}">${isCorrect ? 'Correcto' : 'Incorrecto'}</small><div style="margin-top:6px;color:var(--muted)">${q.note}</div></div>`;
  });
  scoreText.innerHTML = `<strong>${correct} / ${questions.length}</strong> respuestas correctas`;
  resultDetails.innerHTML = details;
  // show special message if score high
  if(correct >= 7){
    specialText.innerHTML = `<strong>Karina, mi amor:</strong><br>Tu magia es poderosa eres divina amor divina y muy inteligente. ${correct}/${questions.length}! Te mereces todo mi amor y m√°s. ‚Äî Carlos üíõ`;
  } else {
    specialText.innerHTML = `<strong>Karina:</strong><br>Lo importante es que lo pasaste conmigo. Te amo y siempre ser√°s mi ni√±a hermosa, un poco distraida pero hermosa. ‚Äî Carlos üíõ`;
  }
  finalMessageBox.style.display='block';
  // launch fireworks
  launchFireworks();
  speakFinal(correct);
}

/* small audio with WebAudio for chime & tap */
function playChime(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type='sine';
    o.frequency.setValueAtTime(880, ctx.currentTime);
    g.gain.setValueAtTime(0, ctx.currentTime);
    g.gain.linearRampToValueAtTime(0.15, ctx.currentTime+0.02);
    o.connect(g); g.connect(ctx.destination); o.start();
    o.frequency.exponentialRampToValueAtTime(1320, ctx.currentTime+0.6);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.9);
    o.stop(ctx.currentTime+1);
  }catch(e){}
}
function playTap(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type='triangle';
    o.frequency.value = 660;
    g.gain.value = 0.04;
    o.connect(g); g.connect(ctx.destination); o.start();
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.12);
    o.stop(ctx.currentTime+0.14);
  }catch(e){}
}

function speakFinal(correct){
  if(!('speechSynthesis' in window)) return;
  const utter = new SpeechSynthesisUtterance();
  utter.lang='es-ES';
  utter.rate=0.95;
  if(correct>=7){
    utter.text = `Felicidades mi amor. Has demostrado tu magia con ${correct} respuestas correctas. Te mandao un abrazo enorme y un chupibeso.`;
  } else {
    utter.text = `Excelente intento mi amor. te manda un beso, eres mi ni√±a hermosa muy distraida.`;
  }
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(utter);
}

/* simple fireworks animation on canvas */
function launchFireworks(){
  const c = document.getElementById('fireworks');
  const ctx = c.getContext('2d');
  c.width = innerWidth; c.height = innerHeight;
  const particles = [];
  function rand(min,max){return Math.random()*(max-min)+min}
  function explode(x,y){
    const count = 32;
    for(let i=0;i<count;i++){
      particles.push({
        x,y,
        vx: Math.cos(i/count*Math.PI*2)*rand(1,6),
        vy: Math.sin(i/count*Math.PI*2)*rand(1,6),
        life: rand(40,100),
        age:0,
        hue: Math.floor(rand(30,60))
      });
    }
  }
  // spawn some fireworks
  let t=0;
  const timer = setInterval(()=>{
    explode(rand(100, c.width-100), rand(100, c.height-200));
    t++;
    if(t>8){ clearInterval(timer); }
  },260);

  function frame(){
    ctx.fillStyle = 'rgba(4,6,12,0.25)'; ctx.fillRect(0,0,c.width,c.height);
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.06;
      p.vx *= 0.99; p.vy *= 0.99;
      p.age++;
      const alpha = Math.max(0, 1 - p.age/p.life);
      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.hue},70%,60%,${alpha})`;
      ctx.arc(p.x, p.y, Math.max(0.6, 3*alpha), 0, Math.PI*2);
      ctx.fill();
      if(p.age > p.life) particles.splice(i,1);
    }
    if(particles.length>0) requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

/* share/save: prepare downloadable HTML snapshot */
document.getElementById('shareBtn').addEventListener('click', ()=> {
  const serializer = new XMLSerializer();
  const doc = document.doctype ? document.doctype.name + '\\n' + document.documentElement.outerHTML : document.documentElement.outerHTML;
  const blob = new Blob([doc], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'reto_magico_para_karina.html';
  document.body.appendChild(a); a.click();
  a.remove();
});

/* retry */
document.getElementById('retryBtn').addEventListener('click', ()=>{
  state.idx=0; state.answers = Array(questions.length).fill(null);
  resultScreen.style.display='none';
  startScreen.style.display='block';
  finalMessageBox.style.display='none';
});

/* keyboard navigation */
document.addEventListener('keydown', (e)=>{
  if(quizScreen.style.display==='block'){
    if(e.key==='ArrowRight') nextBtn.click();
    if(e.key==='ArrowLeft') prevBtn.click();
  }
});

/* small responsive improvements */
window.addEventListener('resize', ()=> {
  const c = document.getElementById('fireworks');
  c.width = innerWidth; c.height = innerHeight;
});
</script>
</body>
</html>
